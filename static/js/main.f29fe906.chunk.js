(this["webpackJsonpcovid-help-admin"]=this["webpackJsonpcovid-help-admin"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(14),c=n.n(r),i=n(69),o=n.n(i),s=n(36),l=n(15),u=n(27),d=n.n(u),j=n(37),b=n(29),O=n(57),p=n.n(O),h=n(139),f=n(145),g=n(144),m=n(70),x=n.n(m),v=n(28),C=n(58);n(91),n(107),n(93);C.a.initializeApp({apiKey:"AIzaSyAeL2Sc4TNMS9C68REjWLB6zG27pd2qsvs",authDomain:"covid-help-iet.firebaseapp.com",databaseURL:"https://covid-help-iet-default-rtdb.firebaseio.com",projectId:"covid-help-iet",storageBucket:"covid-help-iet.appspot.com",messagingSenderId:"843073804063",appId:"1:843073804063:web:8e35fa6f1a25fcc1b4c22a",measurementId:"G-BXK0YPDGWD"});var y=C.a,w=n(8),S=Object(a.createContext)(),k=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(b.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)({}),s=Object(b.a)(o,2),l=s[0],u=s[1],O=Object(a.useState)(!0),p=Object(b.a)(O,2),h=p[0],f=p[1];sessionStorage.getItem("userDetails");return Object(a.useEffect)((function(){var e=y.firestore(),t=function(){var t=Object(j.a)(d.a.mark((function t(n){var a,r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.collection("admins").where("email","==",n),t.next=3,a.get();case 3:r=t.sent,c=r.docs.map((function(e){return Object(v.a)({},e.data())})),u(c[0]),console.log(c[0]),f(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();(function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.auth().onAuthStateChanged((function(e){i(e),e?t(e.email):f(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]),Object(w.jsx)(S.Provider,{value:{currentUser:c,userDetails:l,pending:h},children:t})},A=Object(h.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}})),N=Object(l.g)((function(e){var t=e.history,n=Object(a.useState)(""),r=Object(b.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(""),l=Object(b.a)(o,2),u=l[0],O=l[1];Object(a.useContext)(S).userDetails;function h(){return(h=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,y.auth().signInWithEmailAndPassword(c,u).then((function(){t.push("/")})).catch((function(e){alert(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=A();return Object(w.jsxs)("div",{className:p.a.loginContainer,children:[Object(w.jsxs)("form",{className:x()(m.root,p.a.loginForm),noValidate:!0,autoComplete:"off",children:[Object(w.jsx)(f.a,{id:"username",label:"Username",required:!0,variant:"outlined",onChange:function(e){return i(e.target.value)}}),Object(w.jsx)(f.a,{required:!0,id:"password",label:"Password",type:"password",variant:"outlined",onChange:function(e){return O(e.target.value)}})]}),Object(w.jsx)(g.a,{type:"submit",onClick:function(e){return h.apply(this,arguments)},variant:"contained",color:"primary",children:"Login"}),Object(w.jsx)(s.b,{to:"/",children:"Want to register a Patient ? Click here"})]})})),R=n(51),_=n(55),q=n.n(_),D=n(146),I=n(147),L=n(143),E=n(148),W=n(73),P=n.n(W),Q=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(b.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)({name:"",age:"",email:"",contact:"",address:"",gender:"",reasonForAdmission:""}),O=Object(b.a)(u,2),p=O[0],m=O[1];function x(){return(x=Object(j.a)(d.a.mark((function e(t){var n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=y.firestore(),a=n.collection("patients"),e.next=5,a.doc().id;case 5:c=e.sent,l(!0),r(p.email+"-"+c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){if("radio"===e.target.type)m((function(t){return Object(v.a)(Object(v.a)({},t),{},{gender:e.target.value})}));else{var t=e.target,n=t.id,a=t.value;m((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(R.a)({},n,a))}))}}var S=Object(h.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}}))();return Object(w.jsxs)("div",{className:q.a.registerContainer,children:[Object(w.jsxs)("div",{className:"formContainer",children:[Object(w.jsxs)("form",{className:S.root,noValidate:!0,autoComplete:"off",children:[Object(w.jsx)(f.a,{id:"name",onChange:C,label:"Name",required:!0,variant:"outlined"}),Object(w.jsx)(f.a,{required:!0,id:"age",label:"Age",onChange:C,type:"number",variant:"outlined"}),Object(w.jsx)(f.a,{id:"email",required:!0,onChange:C,label:"Email",type:"Email",variant:"outlined"}),Object(w.jsx)(f.a,{required:!0,id:"contact",onChange:C,type:"tel",label:"Contact",variant:"outlined"}),Object(w.jsx)(f.a,{id:"alternateContact",type:"tel",onChange:C,label:"Alternate Contact",variant:"outlined",placeholder:"(Optional)"}),Object(w.jsx)(f.a,{required:!0,id:"address",label:"Address",onChange:C,variant:"outlined"}),Object(w.jsxs)("div",{className:q.a.genderContainer,children:[Object(w.jsx)(L.a,{component:"legend",children:"Gender"}),Object(w.jsxs)(I.a,{"aria-label":"gender",name:"gender1",children:[Object(w.jsx)(E.a,{value:"male",id:"gender",onChange:C,control:Object(w.jsx)(D.a,{}),label:"Male"}),Object(w.jsx)(E.a,{value:"female",id:"gender",onChange:C,control:Object(w.jsx)(D.a,{}),label:"Female"}),Object(w.jsx)(E.a,{value:"other",id:"gender",onChange:C,control:Object(w.jsx)(D.a,{}),label:"Other"})]})]}),Object(w.jsx)(f.a,{id:"reason",onChange:C,label:"Reason For Admission",required:!0,variant:"outlined"})]}),Object(w.jsx)(g.a,{onClick:function(e){return x.apply(this,arguments)},variant:"contained",color:"primary",children:"Register"}),Object(w.jsx)("br",{}),Object(w.jsx)(s.b,{to:"/login",children:"Are you a doctor/nurse ? Click here"})," "]}),Object(w.jsxs)("div",{className:q.a.QRCodeContainer,children:[Object(w.jsx)("div",{className:"QRCode",children:o?Object(w.jsx)(P.a,{value:n}):Object(w.jsx)("h3",{children:"Your Qr Code will be displayed here"})}),Object(w.jsx)(g.a,{onClick:function(){return y.auth().signOut()},variant:"contained",color:"primary",children:"Logout"})]})]})},B=n(74),F=["component"],G=function(e){var t=e.component,n=Object(B.a)(e,F),r=Object(a.useContext)(S).currentUser;return Object(w.jsx)(l.b,Object(v.a)(Object(v.a)({},n),{},{render:function(e){return r?Object(w.jsx)(t,Object(v.a)({},e)):Object(w.jsx)(l.a,{to:"/login"})}}))},U=function(){return Object(w.jsx)(k,{children:Object(w.jsx)("div",{className:o.a.container,children:Object(w.jsx)(s.a,{children:Object(w.jsxs)(l.d,{children:[Object(w.jsx)(G,{path:"/",exact:!0,component:Q}),Object(w.jsx)(l.b,{path:"/login",exact:!0,component:N})]})})})})};c.a.render(Object(w.jsx)(U,{}),document.getElementById("root"))},55:function(e,t,n){e.exports={registerContainer:"Register_registerContainer__1gLtW",QRCodeContainer:"Register_QRCodeContainer__2y5WL"}},57:function(e,t,n){e.exports={loginContainer:"Login_loginContainer__H_MVx"}},69:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.f29fe906.chunk.js.map